<% content_for(:page_title, "MARKET SALES SUMMARY")%>
<div class="mx-auto w-full text-centre">




      <hr><hr>
<div class="mb-4">
  <form method="get" action="<%= request.path %>">
    <label for="year" class="mr-2 text-lg font-semibold">Select Year:</label>
    <select name="year" id="year" class="border p-2 rounded-md">
      <% @years.each do |y| %>
        <option value="<%= y %>" <%= "selected" if y.to_s == @year.to_s %>><%= y %></option>
      <% end %>
    </select>
    <button type="submit" class="ml-2 px-4 py-2 bg-blue-500 text-white rounded-md">Filter</button>
  </form>
</div>

<table class="table-auto border-collapse border border-gray-300 w-full text-center">
  <thead>
    <tr class="bg-gray-200 text-gray-700">
      <th class="border border-gray-300 px-4 py-2">Product</th>
      <% 1.upto(12) do |month| %>
        <th class="border border-gray-300 px-4 py-2"><%= Date::MONTHNAMES[month] %></th>
      <% end %>
      <th class="border border-gray-300 px-4 py-2 font-bold">Total</th>
    </tr>
  </thead>
  <tbody>
    <% @sales_by_product.each do |product, sales| %>
      <tr class="odd:bg-white even:bg-gray-100 text-gray-900">
        <td class="border border-gray-300 px-4 py-2 font-semibold"><%= product %></td>
        <% 1.upto(12) do |month| %>
          <td class="border border-gray-300 px-4 py-2">
            <%= number_to_currency(sales[month] || 0) %>
          </td>
        <% end %>
        <td class="border border-gray-300 px-4 py-2 font-bold text-green-600">
          <%= number_to_currency(sales.values.sum) %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<div class="mb-4">
  <form method="get" action="<%= request.path %>">
    <label for="year" class="mr-2 text-lg font-semibold">Select Year:</label>
    <select name="year" id="year" class="border p-2 rounded-md">
      <% @years.each do |y| %>
        <option value="<%= y %>" <%= "selected" if y.to_s == @year.to_s %>><%= y %></option>
      <% end %>
    </select>
    <button type="submit" class="ml-2 px-4 py-2 bg-blue-500 text-white rounded-md">Filter</button>
  </form>
</div>

<table class="table-auto border-collapse border border-gray-300 w-full text-center">
  <thead>
    <tr class="bg-gray-200 text-gray-700">
      <th class="border border-gray-300 px-4 py-2">Product</th>
      <% 1.upto(12) do |month| %>
        <th class="border border-gray-300 px-4 py-2"><%= Date::MONTHNAMES[month] %></th>
      <% end %>
      <th class="border border-gray-300 px-4 py-2 font-bold">Total</th>
    </tr>
  </thead>
  <tbody>
    <% @sales_by_product.each do |product, sales| %>
      <tr class="odd:bg-white even:bg-gray-100 text-gray-900">
        <td class="border border-gray-300 px-4 py-2 font-semibold"><%= product %></td>
        <% 1.upto(12) do |month| %>
          <td class="border border-gray-300 px-4 py-2">
            <%= number_to_currency(sales[month] || 0) %>
          </td>
        <% end %>
        <td class="border border-gray-300 px-4 py-2 font-bold text-green-600">
          <%= number_to_currency(sales.values.sum) %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>



