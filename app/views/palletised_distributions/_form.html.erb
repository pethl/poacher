<div class="max-w-2xl mx-auto mt-6 bg-white p-6">
  <%= form_with(model: palletised_distribution, local: true) do |form| %>

    <%= form_errors_for(palletised_distribution) %>

    <div class="grid grid-cols-2 gap-x-6 gap-y-4 items-center">

      <!-- Date -->
      <label class="text-right font-semibold text-gray-700">
        <%= form.label :date %>
      </label>
      <div>
        <%= form.date_field :date, class: field_class_flex %>
      </div>

      <!-- Company Name -->
      <label class="text-right font-semibold text-gray-700">
        <%= form.label :company_name %>
      </label>
      <div>
        <%= form.text_field :company_name, class: field_class_flex %>
      </div>

      <!-- Registration -->
      <label class="text-right font-semibold text-gray-700">
        <%= form.label :registration %>
      </label>
      <div>
        <%= form.text_field :registration, class: field_class_flex %>
      </div>

      <!-- Trailer Number / Type -->
      <label class="text-right font-semibold text-gray-700">
        <%= form.label :trailer_number_type, "Trailer Number / Type" %>
      </label>
      <div>
        <%= form.text_field :trailer_number_type, class: field_class_flex %>
      </div>

      <!-- Temperature -->
      <label class="text-right font-semibold text-gray-700">
        <%= form.label :temperature, "Temperature °C" %>
      </label>
      <div>
        <%= form.text_field :temperature, class: field_class_flex_small %>
      </div>

      <!-- Vehicle Clean -->
      <label class="text-right font-semibold text-gray-700">
        <%= form.label :vehicle_clean, "Vehicle Clean, free of taint?" %>
      </label>
      <div>
        <%= form.select :vehicle_clean, options_for_select(yes_no, palletised_distribution.vehicle_clean), { include_blank: true }, class: field_class_flex_small %>
      </div>

      <!-- Destination -->
      <label class="text-right font-semibold text-gray-700">
        <%= form.label :destination %>
      </label>
      <div>
        <%= form.text_field :destination, class: field_class_flex %>
      </div>

      <!-- Number of Pallets -->
      <label class="text-right font-semibold text-gray-700">
        <%= form.label :number_of_pallets %>
      </label>
      <div>
        <%= form.number_field :number_of_pallets, class: field_class_flex_small %>
      </div>

      <!-- Staff Check -->
      <label class="text-right font-semibold text-gray-700">
        <%= form.label :staff_id, "Check By (Staff Member)" %>
      </label>
      <div>
        <%= form.collection_select(:staff_id, @staffs, :id, :full_name, { prompt: true }, { class: field_class_flex }) %>
      </div>

      <!-- Staff Signature -->
      <div class="col-span-2">
        <div data-controller="signature" class="flex flex-col items-center space-y-4 p-4 border rounded-lg bg-gray-50">
          <p class="text-md font-semibold">Staff Signature</p>
          <canvas width="400" height="200" class="border border-gray-400 rounded bg-white shadow-sm"></canvas>
          <%= form.hidden_field :staff_signature, class: "signature-input" %>
         <button type="button"
              class="clear-signature text-sm text-gray-500 hover:text-gray-700 underline">
            Clear Signature
            </button>
          </div>
      </div>

      <!-- Driver Signature -->
      <div class="col-span-2 mt-4">
        <div data-controller="signature" class="flex flex-col items-center space-y-4 p-4 border rounded-lg bg-gray-50">
          <p class="text-md font-semibold">Driver Signature</p>
          <canvas width="400" height="200" class="border border-gray-400 rounded bg-white shadow-sm"></canvas>
          <%= form.hidden_field :driver_signature, class: "signature-input" %>
           <button type="button"
              class="clear-signature text-sm text-gray-500 hover:text-gray-700 underline">
            Clear Signature
            </button>
          </div>
      </div>

      <!-- Action Buttons -->
      <div class="text-left mt-2">
        <%= link_to "← Back to Index", palletised_distributions_path, class: clear_button_class %>
      </div>
      <div class="text-left mt-2">
        <%= form.submit "Save Record", class: fill_button_class %>
      </div>

    </div>
  <% end %>
</div>
