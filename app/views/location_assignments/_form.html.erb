<div class="max-w-md mx-auto mt-4 bg-white p-4 sm:p-6" data-controller="qr-scanner">
  <%= form_with url: location_assignments_path, method: :post, local: true do |form| %>
    <div class="space-y-4 sm:space-y-6">

      <!-- Make Date -->
      <div class="grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-4 items-center">
        <label class="col-span-1 text-base font-semibold text-left">Make Date</label>
        <div class="col-span-1 md:col-span-2 max-w-[260px]">
          <%= render "shared/makesheet_picker",
                form: form,
                makesheets: Makesheet.not_finished.ordered_reverse,
                field: :makesheet_id,
                wrapper_class: "w-full",
                input_class: "#{field_class_flex} !w-full max-w-[260px] py-3 sm:py-2 px-3 text-base" %>
        </div>
      </div>

      <!-- Location -->
      <div class="grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-4 items-center">
        <label class="col-span-1 text-base font-semibold text-left">Select Location OR Scan QR</label>
        <div class="col-span-1 md:col-span-2 max-w-[260px]">
          <%= form.select :location_id,
            options_from_collection_for_select(Location.active.order(:sort_order), :id, :name, location_id),
            { prompt: "Select" },
            class: "#{field_class_flex} !w-full max-w-[260px] py-3 sm:py-2 px-3 text-base",
            id: "location-id-select",
            data: { qr_scanner_target: "select" } %>
        </div>
      </div>

      <!-- QR reader -->
      <div class="mt-2">
        <label class="block text-base font-semibold text-gray-700 mb-2">Scan QR</label>
        <div id="qr-reader" style="width:200px;height:auto;" class="mx-auto"></div>
      </div>

      <!-- Submit -->
      <%= form.submit "Assign Location",
            class: "w-full text-base sm:text-lg py-3 sm:py-4 bg-gray-800 text-white rounded hover:bg-gray-700 transition" %>
    </div>
  <% end %>
</div>


