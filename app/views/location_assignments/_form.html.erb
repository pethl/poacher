<div class="max-w-xl mx-auto mt-4 bg-white p-4 sm:p-6 text-center" data-controller="qr-scanner">
  <%= form_with url: location_assignments_path, method: :post, local: true do |form| %>
    <div class="space-y-6 sm:space-y-8">

      <!-- Make Date -->
      <div>
        <label class="block font-semibold text-gray-700 mb-2 sm:mb-1">Make Date</label>
        <div class="mx-auto w-full">
          <%= render "shared/makesheet_picker",
                form: form,
                makesheets: Makesheet.not_finished.ordered_reverse,
                field: :makesheet_id,
                # mobile-friendly override:
                wrapper_class: "w-full",
                input_class: "text-base sm:text-sm py-4 sm:py-2 px-4 sm:px-2 w-full border border-gray-300 rounded-md"
          %>
        </div>
      </div>

      <!-- QR Message -->
      <div>
        <p data-qr-scanner-target="message" class="text-2xl min-h-[42px]"></p>
      </div>

      <!-- QR Scanner -->
      <div>
        <label class="block font-semibold text-gray-700 mb-2 sm:mb-1">Scan Location QR Code</label>
        <div id="qr-reader" style="width:300px;height:auto;" class="mx-auto"></div>
        <p class="text-xs text-gray-500 mt-2">Scan a QR code to auto-select a location</p>
      </div>

      <!-- Backup Location -->
      <div>
        <label class="block font-semibold text-gray-700 mb-2 sm:mb-1">or Select Location</label>
      <%= form.select :location_id,
      options_from_collection_for_select(Location.active.order(:sort_order), :id, :name, location_id),
      { prompt: "Select Location" },
      class: "#{field_class_flex} text-base sm:text-sm py-4 sm:py-2 px-4 sm:px-2 w-full max-w-[240px] sm:max-w-none md:max-w-none lg:max-w-[240px]",
      id: "location-id-select",
      data: { qr_scanner_target: "select" } %>


      </div>

      <!-- Submit Button -->
      <div class="mt-6">
        <%= form.submit "Assign Location", class: "w-full text-base sm:text-lg py-4 sm:py-3 px-4 bg-gray-800 text-white rounded-lg hover:bg-lime-700 transition-colors" %>
      </div>
    </div>
  <% end %>
</div>


