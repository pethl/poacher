<div class="overscroll-none">
<% content_for :title, "Poacher: Daily Record of Metal Breakages" %>
<% content_for(:page_title, "DAILY RECORD of METAL BREAKAGES")%>
<% content_for(:print_button, "browser-print")%>
<div id="breakages">
 
 <div class="w-full flex justify-between"> 
    <div class="relative pt-4 pb-2">
      <a class="bg-transparent text-sm hover:bg-gray-600 font-semibold hover:text-white mt-8 my-4 py-2 px-4 border border-gray-900 hover:border-transparent rounded-lg" href="breakages/create_month">Add a Month</a>
    </div>

    <div class= "">
       
    </div>

    
  <!-- Right Section -->
   <div class="flex-1 p-2 max-w-xs mx-auto text-right">
     <%= form_with(url: breakages_path, method: :get, local: true, class: "flex gap-2") do %>
    
        <div class="w-32"> 
          <label for="month" class="block mt-1 text-xs font-medium text-gray-700">Month</label>
          <%= select_tag :month, options_for_select((1..12).map { |m| [Date::MONTHNAMES[m], m] }, params[:month]), 
                        include_blank: "Select ", class: filter_drop_down %>
        </div>

        <div class="w-32">
          <label for="year" class="block mt-1 text-xs font-medium text-gray-700">Year</label>
          <%= select_tag :year, options_for_select((2023..Date.today.year).to_a.reverse, params[:year]), 
                        include_blank: "Select ", class: filter_drop_down%>
        </div>

        <div class="pt-5 flex place-items-center">
          <%= submit_tag "Filter", class: filter_button %>
        </div>
      <% end %>
    </div>
  </div>
<br>
<div class="flex flex-col h-screen">
    <div class="flex-grow overscroll-none">
      <table class="mx-auto table-fixed relative w-full 2xllg:w-2/3  text-sm text-center text-gray-500  ">
       <thead class="text-xs text-gray-700  bg-gray-200 ">
       
        <tr class="bg-gray-200 sticky top-0 border-b-2 border-t-2 border-gray-400">
          <th scope="col" colspan="3" class="sticky top-0 px-4 py-2 bg-white border-t-2 border-l-2 border-white text-left">
            Knives inc tips, Cutting Springs & Wire Breakages
            </th>
            <th scope="col" colspan="4" class="sticky top-0 px-4 py-2 border-r-2 border-l-2 border-gray-400 text-right">
              Type of items BROKEN or DAMAGED during the day
            </th>
            <th scope="col" colspan="3" class="sticky top-0 px-4 py-2 border-r-2 border-gray-400 text-center">
              Quantity broken and how has it broken?
            </th>
             <th scope="col" colspan="4" class="sticky top-0 px-4 py-2 bg-white border border-gray-400 text-center">
               <span class="text-2xl font-strong">
                <%= @breakages.any? ? @breakages.first.date.strftime("%B %Y") : "No Records" %> 
              </span>
            </th>

          </tr>
        <tr class="bg-gray-200 sticky top-0 border border-gray-400">
                <th scope="col" class="sticky top-0 px-4 py-2 border-r-2  border-gray-400 text-center">
                  Date
                </th>
                <th scope="col" colspan="2" class="sticky top-0 px-4 py-2 pr-2 border-r-2 border-gray-400 text-center">
                 ANY METAL MATERIALS BROKEN DURING THE DAY?
                </th>
                <th id="col" class="sticky top-0 px-4 py-2 border border-gray-400 text-center">
                  Knife inc tip
                </th>
                <th scope="col" class="sticky top-0 px-4 py-2 border border-gray-400 text-center">
                  Cutting Board Cutting Wire
                </th>
                <th scope="col" class="sticky top-0 px-4 py-2 border border-gray-400 text-center">
                  Ringing Machine Cutting Wire
                </th>
                <th scope="col" class="sticky top-0 px-4 py-2 border-r-2 border-gray-400 text-center">
                  Cutting Spring
                </th>
                 <th id="col" class="sticky top-0 px-4 py-2 border border-gray-400 text-center">
                  Wire Broken in 2
                </th>
                <th scope="col" class="sticky top-0 px-4 py-2 border border-gray-400 text-center">
                  Wire Unwound
                </th>
                <th scope="col"  colspan="2" class="sticky top-0 px-4 py-2 border-r-2 border-gray-400 text-center">
                  Other (inc description)
                </th>
                 <th scope="col" class="text-xs sticky top-0 px-4 py-2 border-r-2 border-gray-400 text-center">
                  Has product been contaminated?
                </th>
                 <th scope="col" class="sticky top-0 px-4 py-2 border border-gray-400 text-center">
                  Action Taken
                </th>
                 <th scope="col" class="sticky top-0 px-4 py-2 border border-gray-400 text-center">
                  Signed
                </th> 
            </tr>
             <tr class="bg-gray-400">
              <th></th>
             <th class="border-l-2 border-r-2 border-gray-200 text-white font-bold text-lg">YES</th>
             <th class="border-r-2 border-gray-200 text-white font-bold text-lg ">NO</th>
             <th colspan="4" class="border-r-2 border-gray-200 "></th>
             <th colspan="3" class="border-r-2 border-gray-200 "></th>
             <th class="border-r-2 border-gray-200  text-white font-bold">Desc.</th>
              <th class="border-r-2 border-gray-400 "></th>
              <th colspan="2" class="border-r-2 border-gray-400 "></th>
              </tr>
        </thead>
        <tbody class="overflow-contain">
         
           <%= render @breakages %>
        </tbody>
    </table>
</div> 
<br><br>


